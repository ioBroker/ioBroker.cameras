(this["webpackJsonpcameras-admin"]=this["webpackJsonpcameras-admin"]||[]).push([[0],{141:function(e){e.exports=JSON.parse('{"a":"0.1.4"}')},215:function(e){e.exports=JSON.parse('{"Are you sure?":"Are you sure?","Cancel":"Cancel","Close":"Close","Error":"Error","Load configuration from file":"Load configuration from file","Ok":"Ok","Options":"Options","Save":"Save","Save and close":"Save and close","Save configuration to file":"Save configuration to file","Success":"Success","Test connection":"Test connection","Type":"Type","not connected":"not connected","Description":"Description","Name":"Name","Test":"Test","Apply":"Apply","Username":"User name","Password":"Password","Edit camera %s [%s]":"Edit camera %s [%s]"}')},216:function(e){e.exports=JSON.parse('{"Are you sure?":"Bist du sicher?","Cancel":"Abbrechen","Close":"Schlie\xdfen","Error":"Fehler","Load configuration from file":"Konfiguration aus Datei laden","Ok":"Ok","Options":"Optionen","Save":"speichern","Save and close":"Speichern und schlie\xdfen","Save configuration to file":"Konfiguration in Datei speichernn","Success":"Erfolgreich","Test connection":"Testverbindung","Type":"Typ","not connected":"nicht verbunden","Description":"Beschreibung","Name":"Name","Test":"Pr\xfcfung","Apply":"Speichern","Username":"Nutzername","Password":"Passwort","Edit camera %s [%s]":"Kamera bearbeiten %s [%s]"}')},217:function(e){e.exports=JSON.parse('{"Are you sure?":"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?","Cancel":"\u041e\u0442\u043c\u0435\u043d\u0430","Close":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c","Error":"\u041e\u0448\u0438\u0431\u043a\u0430","Load configuration from file":"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e \u0438\u0437 \u0444\u0430\u0439\u043b\u0430","Ok":"Ok","Options":"\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b","Save":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c","Save and close":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438 \u0437\u0430\u043a\u0440\u044b\u0442\u044c","Save configuration to file":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e \u0432 \u0444\u0430\u0439\u043b","Success":"\u0423\u0441\u043f\u0435\u0448\u043d\u043e","Test connection":"\u0422\u0435\u0441\u0442\u043e\u0432\u043e\u0435 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435","Type":"\u0422\u0438\u043f","not connected":"\u041d\u0435 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d","Description":"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435","Name":"\u0438\u043c\u044f","Test":"\u0422\u0435\u0441\u0442\u043e\u0432\u043e\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u0435","Apply":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c","Username":"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f","Password":"\u043f\u0430\u0440\u043e\u043b\u044c","Edit camera %s [%s]":"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043a\u0430\u043c\u0435\u0440\u0443 %s [%s]"}')},218:function(e){e.exports=JSON.parse('{"Are you sure?":"Voc\xea tem certeza?","Cancel":"Cancelar","Close":"Fechar","Error":"Erro","Load configuration from file":"Carregar configura\xe7\xe3o do arquivo","Ok":"Est\xe1 bem","Options":"Op\xe7\xf5es","Save":"Salve \ue051","Save and close":"Salvar e fechar","Save configuration to file":"Salvar configura\xe7\xe3o no arquivo","Success":"Sucesso","Test connection":"Conex\xe3o de teste","Type":"Tipo","not connected":"n\xe3o conectado","Description":"Descri\xe7\xe3o","Name":"Nome","Test":"Teste","Apply":"Aplique","Username":"Nome do usu\xe1rio","Password":"Senha","Edit camera %s [%s]":"Editar c\xe2mera %s [%s]"}')},219:function(e){e.exports=JSON.parse('{"Are you sure?":"Weet je het zeker?","Cancel":"annuleren","Close":"Dichtbij","Error":"Fout","Load configuration from file":"Laad de configuratie uit het bestand","Ok":"OK","Options":"opties","Save":"Opslaan","Save and close":"Opslaan en afsluiten","Save configuration to file":"Configuratie opslaan in bestand","Success":"Succes","Test connection":"Test verbinding","Type":"Type","not connected":"niet verbonden","Description":"Omschrijving","Name":"Naam","Test":"Test","Apply":"Van toepassing zijn","Username":"Gebruikersnaam","Password":"Wachtwoord","Edit camera %s [%s]":"Camera %s [%s] bewerken"}')},220:function(e){e.exports=JSON.parse('{"Are you sure?":"\xcates-vous s\xfbr?","Cancel":"Annuler","Close":"Fermer","Error":"Erreur","Load configuration from file":"Charger la configuration \xe0 partir du fichier","Ok":"D\'accord","Options":"Les options","Save":"sauvegarder","Save and close":"Sauver et fermer","Save configuration to file":"Enregistrer la configuration dans un fichier","Success":"Succ\xe8s","Test connection":"Tester la connexion","Type":"Type","not connected":"pas connect\xe9","Description":"La description","Name":"Nom","Test":"Tester","Apply":"Appliquer","Username":"Nom d\'utilisateur","Password":"Mot de passe","Edit camera %s [%s]":"Modifier la cam\xe9ra %s [%s]"}')},221:function(e){e.exports=JSON.parse('{"Are you sure?":"Sei sicuro?","Cancel":"Annulla","Close":"Vicino","Error":"Errore","Load configuration from file":"Carica la configurazione dal file","Ok":"Ok","Options":"Opzioni","Save":"Salva","Save and close":"Salva e chiudi","Save configuration to file":"Salva la configurazione in un file","Success":"Successo","Test connection":"Test di connessione","Type":"Genere","not connected":"non connesso","Description":"Descrizione","Name":"Nome","Test":"Test","Apply":"Applicare","Username":"Nome utente","Password":"Parola d\'ordine","Edit camera %s [%s]":"Modifica fotocamera %s [%s]"}')},222:function(e){e.exports=JSON.parse('{"Are you sure?":"\xbfEst\xe1s seguro?","Cancel":"Cancelar","Close":"Cerca","Error":"Error","Load configuration from file":"Cargar configuraci\xf3n desde archivo","Ok":"Ok","Options":"Opciones","Save":"Salvar","Save and close":"Guardar y cerrar","Save configuration to file":"Guardar configuraci\xf3n en archivo","Success":"\xc9xito","Test connection":"Conexi\xf3n de prueba","Type":"Tipo","not connected":"no conectado","Description":"Descripci\xf3n","Name":"Nombre","Test":"Prueba","Apply":"Aplicar","Username":"Nombre de usuario","Password":"Contrase\xf1a","Edit camera %s [%s]":"Editar c\xe1mara %s [%s]"}')},223:function(e){e.exports=JSON.parse('{"Are you sure?":"Jeste\u015b pewny?","Cancel":"Anuluj","Close":"Blisko","Error":"B\u0142\u0105d","Load configuration from file":"Za\u0142aduj konfiguracj\u0119 z pliku","Ok":"Dobrze","Options":"Opcje","Save":"Zapisa\u0107","Save and close":"Zapisz i zamknij","Save configuration to file":"Zapisz konfiguracj\u0119 do pliku","Success":"Sukces","Test connection":"Testuj po\u0142\u0105czenie","Type":"Rodzaj","not connected":"nie po\u0142\u0105czony","Description":"Opis","Name":"Imi\u0119","Test":"Test","Apply":"Zastosowa\u0107","Username":"Nazwa U\u017cytkownika","Password":"Has\u0142o","Edit camera %s [%s]":"Edytuj kamer\u0119 %s [%s]"}')},224:function(e){e.exports=JSON.parse('{"Are you sure?":"\u4f60\u786e\u5b9a\u5417\uff1f","Cancel":"\u53d6\u6d88","Close":"\u5173","Error":"\u9519\u8bef","Load configuration from file":"\u4ece\u6587\u4ef6\u52a0\u8f7d\u914d\u7f6e","Ok":"\u597d","Options":"\u9009\u4ef6","Save":"\u4fdd\u5b58","Save and close":"\u4fdd\u5b58\u5e76\u5173\u95ed","Save configuration to file":"\u5c06\u914d\u7f6e\u4fdd\u5b58\u5230\u6587\u4ef6","Success":"\u6210\u529f","Test connection":"\u6d4b\u8bd5\u8fde\u63a5","Type":"\u7c7b\u578b","not connected":"\u672a\u8fde\u63a5","Description":"\u63cf\u8ff0","Name":"\u540d\u79f0","Test":"\u6d4b\u8bd5","Apply":"\u5e94\u7528","Username":"\u7528\u6237\u540d","Password":"\u5bc6\u7801","Edit camera %s [%s]":"\u7f16\u8f91\u76f8\u673a%s [%s]"}')},226:function(e,t,s){"use strict";s.r(t);var a=s(0),n=s(13),i=s.n(n),r=s(141),o=s(257);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s(123);var c=s(105),l=s.n(c),p=s(107),u=s.n(p),d=s(31),h=s(32),m=s(111),f=s(49),v=s(38),b=s(36),g=s(6),j=s(263),O=s(266),S=s(264),y=s(142),C=s.n(y),x=s(109),N=s.n(x),k=s(11),T=s.n(k),w=s(270),E=s(62),A=s.n(E),D=s(139),I=s(134),J=s(260),L=s(265),U=s(269),z=s(268),q=s(151),P=s(144),B=s.n(P),M=s(108),W=s.n(M),H=s(5),R=function(e){Object(v.a)(s,e);var t=Object(b.a)(s);function s(e){var a;return Object(d.a)(this,s),(a=t.call(this,e)).state={showHint:!1,toast:"",ips:[],requesting:!0,webInstances:[]},a}return Object(h.a)(s,[{key:"componentDidMount",value:function(){var e,t=this;this.props.getIpAddresses().then((function(t){return e=t})).then((function(){return t.props.getExtendableInstances()})).then((function(s){return t.setState({requesting:!1,ips:e,webInstances:s.map((function(e){return e._id.replace("system.adapter.","")}))})}))}},{key:"showError",value:function(e){this.setState({errorText:e})}},{key:"renderError",value:function(){var e=this;return this.state.errorText?Object(H.jsx)(W.a,{text:this.state.errorText,title:T.a.t("Error"),onClose:function(){return e.setState({errorText:""})}}):null}},{key:"renderToast",value:function(){var e=this;return this.state.toast?Object(H.jsx)(D.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:!0,autoHideDuration:6e3,onClose:function(){return e.setState({toast:""})},ContentProps:{"aria-describedby":"message-id"},message:Object(H.jsx)("span",{id:"message-id",children:this.state.toast}),action:[Object(H.jsx)(I.a,{"aria-label":"Close",color:"inherit",className:this.props.classes.close,onClick:function(){return e.setState({toast:""})},children:Object(H.jsx)(q.a,{})},"close")]}):null}},{key:"renderHint",value:function(){var e=this;return this.state.showHint?Object(H.jsx)(A.a,{text:T.a.t("Click now Get new connection certificates to request new temporary password"),onClose:function(){return e.setState({showHint:!1})}}):null}},{key:"renderSettings",value:function(){var e=this;return[this.state.ips&&this.state.ips.length?Object(H.jsxs)(J.a,{className:this.props.classes.bind,children:[Object(H.jsx)(z.a,{children:T.a.t("Local IP address")}),Object(H.jsxs)(L.a,{disabled:this.state.requesting,value:this.props.native.bind||"",onChange:function(t){return e.props.onChange("bind",t.target.value)},children:[Object(H.jsx)(U.a,{value:"127.0.0.1",children:"127.0.0.1"}),this.state.ips.map((function(e){return Object(H.jsx)(U.a,{value:e,children:e},e)}))]})]},"bindSelect"):Object(H.jsx)(w.a,{disabled:this.state.requesting,className:this.props.classes.bind,label:T.a.t("Local IP address"),value:this.props.native.bind,onChange:function(t){return e.props.onChange("bind",t.target.value)}},"bind"),Object(H.jsx)(w.a,{disabled:this.state.requesting,type:"number",min:1,max:65535,className:this.props.classes.port,label:T.a.t("Local port"),value:this.props.native.port,onChange:function(t){return e.props.onChange("port",t.target.value)}},"port"),Object(H.jsx)("br",{},"br1"),Object(H.jsx)(w.a,{disabled:this.state.requesting,type:"number",min:0,max:1e4,className:this.props.classes.defaultTimeout,label:T.a.t("Default timeout (ms)"),value:this.props.native.defaultTimeout,onChange:function(t){return e.props.onChange("defaultTimeout",t.target.value)}},"defaultTimeout"),Object(H.jsx)("br",{},"br2"),Object(H.jsxs)(J.a,{className:this.props.classes.bind,children:[Object(H.jsx)(z.a,{children:T.a.t("WEB Instance")}),Object(H.jsxs)(L.a,{disabled:this.state.requesting,value:this.props.native.webInstance,onChange:function(t){return e.props.onChange("webInstance",t.target.value)},children:[Object(H.jsx)(U.a,{value:"*",children:T.a.t("All")}),this.state.webInstances?this.state.webInstances.map((function(e){return Object(H.jsx)(U.a,{value:e,children:e},e)})):null]})]},"webInstanceSelect")]}},{key:"renderMessage",value:function(){var e=this;return this.state.messageText?Object(H.jsx)(A.a,{title:T.a.t("Success"),onClose:function(){return e.setState({messageText:""})},children:this.state.messageText}):null}},{key:"checkConnection",value:function(){var e=this;this.setState({requesting:!0},(function(){return e.props.socket.sendTo(e.props.adapterName+"."+e.props.instance,"test",e.props.native,(function(t){t.error?e.setState({requesting:!1},(function(){return e.showError(T.a.t(t.error))})):e.setState({messageText:t.result,requesting:!1})}))}))}},{key:"render",value:function(){var e=this;return Object(H.jsxs)("form",{className:this.props.classes.tab,children:[Object(H.jsx)(B.a,{instance:this.props.instance,common:this.props.common,native:this.props.native,onError:function(t){return e.setState({errorText:t})},onLoad:this.props.onLoad}),this.renderSettings(),Object(H.jsx)("br",{}),this.renderHint(),this.renderToast(),this.renderMessage(),this.renderError()]},"option")}}]),s}(a.Component),F=Object(g.a)((function(e){return{tab:{width:"100%",minHeight:"100%"},bind:{marginRight:10,marginBottom:20,minWidth:200},port:{width:100},defaultTimeout:{width:150}}}))(R),V=s(136),Z=s(128),G=s(138),_=s(129),K=s(130),$=s(131),Q=s(149),X=s.n(Q),Y=s(146),ee=s.n(Y),te=s(150),se=s.n(te),ae=s(147),ne=s.n(ae),ie=s(148),re=s.n(ie),oe=s(145),ce=s.n(oe),le=function(e){Object(v.a)(s,e);var t=Object(b.a)(s);function s(e){var a;Object(d.a)(this,s),a=t.call(this,e);var n=JSON.parse(JSON.stringify(a.props.settings));return n.url=n.url||"",a.state=n,a}return Object(h.a)(s,[{key:"render",value:function(){var e=this;return Object(H.jsx)("div",{className:this.props.classes.page,children:Object(H.jsx)(w.a,{className:this.props.classes.url,label:T.a.t("Camera URL"),value:this.state.url,onChange:function(t){e.setState({url:t.target.value},(function(){return e.props.onChange({url:e.state.url})}))}},"url")})}}]),s}(a.Component),pe=Object(g.a)((function(e){return{page:{width:"100%"},url:{width:"100%"}}}))(le),ue=function(e){Object(v.a)(s,e);var t=Object(b.a)(s);function s(e){var a;Object(d.a)(this,s),a=t.call(this,e);var n=JSON.parse(JSON.stringify(a.props.settings));return n.url=n.url||"",n.password=n.password||"",n.username=n.username||"",n.timeout=n.timeout||1e3,a.state=n,a}return Object(h.a)(s,[{key:"componentDidMount",value:function(){var e=this;this.props.decrypt(this.state.password,(function(t){return e.setState({password:t})}))}},{key:"reportSettings",value:function(){var e=this;this.props.encrypt(this.state.password,(function(t){e.props.onChange({url:e.state.url,username:e.state.username,password:t})}))}},{key:"render",value:function(){var e=this;return Object(H.jsxs)("div",{className:this.props.classes.page,children:[Object(H.jsx)(w.a,{className:this.props.classes.url,label:T.a.t("Camera URL"),value:this.state.url,onChange:function(t){return e.setState({url:t.target.value},(function(){return e.reportSettings()}))}},"url"),Object(H.jsx)("br",{}),Object(H.jsx)(w.a,{autoComplete:"off",className:this.props.classes.username,label:T.a.t("Username"),value:this.state.username,onChange:function(t){return e.setState({username:t.target.value},(function(){return e.reportSettings()}))}},"username"),Object(H.jsx)("br",{}),Object(H.jsx)(w.a,{type:"password",autoComplete:"off",className:this.props.classes.password,label:T.a.t("Password"),value:this.state.password,onChange:function(t){return e.setState({password:t.target.value},(function(){return e.reportSettings()}))}},"password")]})}}]),s}(a.Component),de={url:{Config:pe,name:"URL"},urlBasicAuth:{Config:Object(g.a)((function(e){return{page:{width:"100%"},url:{width:"100%"}}}))(ue),name:"URL with basic auth"}},he=["name","desc","type"],me=function(e){Object(v.a)(s,e);var t=Object(b.a)(s);function s(e){var a;return Object(d.a)(this,s),(a=t.call(this,e)).state={editCam:!1,editChanged:!1,requesting:!1,instanceAlive:a.props.instanceAlive,webInstanceHost:""},Object.keys(de).forEach((function(e){de[e].name&&!de[e].translated&&(de[e].translated=!0,de[e].name=T.a.t(de[e].name))})),a}return Object(h.a)(s,[{key:"componentDidMount",value:function(){this.getWebInstances()}},{key:"getWebInstances",value:function(){var e=this;this.props.socket.getAdapterInstances("web").then((function(t){var s=null;"*"===e.props.native.webInstance?s=t[Object.keys(t)[0]]:s=t[Object.keys(t).find((function(t){return t.endsWith(e.props.native.webInstance)}))];s&&(s.native=s.native||{}),s.native.bind&&"0.0.0.0"!==s.native.bind||(s.native.bind=window.location.hostname),s&&e.setState({webInstanceHost:s.native.bind+":"+(s.native.port||8082)})}))}},{key:"renderMessage",value:function(){var e=this;return this.state.message?Object(H.jsx)(A.a,{text:this.state.message,onClose:function(){return e.setState({message:""})}}):null}},{key:"onTest",value:function(){var e=this,t=JSON.parse(this.editedSettings||this.editedSettingsOld);he.forEach((function(s){return t[s]=e.props.native.cameras[e.state.editCam][s]}));var s=setTimeout((function(){s=null,e.setState({message:"Timeout",requesting:!1})}),t.timeout||this.props.native.defaultTimeout);this.setState({requesting:!0},(function(){e.props.socket.sendTo(e.props.adapterName+"."+e.props.instance,"test",t,(function(t){if(s&&clearTimeout(s),t&&t.body&&!t.error)e.setState({testImg:t.body,requesting:!1});else{var a=t&&t.error?t.error:T.a.t("No answer");"string"!==typeof a&&(a=JSON.stringify(a)),e.setState({message:a,requesting:!1})}}))}))}},{key:"renderConfigDialog",value:function(){var e=this;if(!1!==this.state.editCam){var t=this.props.native.cameras[this.state.editCam],s=(de[t.type]||de.url).Config;return Object(H.jsxs)(G.a,{maxWidth:"lg",fullWidth:!0,open:!0,onClose:function(){return null!==e.state.editCam&&e.setState({editCam:!1,editChanged:!1})},children:[Object(H.jsx)($.a,{children:T.a.t("Edit camera %s [%s]",t.name,t.type)}),Object(H.jsxs)(K.a,{children:[Object(H.jsxs)("div",{className:this.props.classes.divConfig,children:[Object(H.jsx)(s,{settings:t,onChange:function(t){e.editedSettings=JSON.stringify(t),e.editedSettingsOld===e.editedSettings&&e.state.editChanged?e.setState({editChanged:!1}):e.editedSettingsOld===e.editedSettings||e.state.editChanged||e.setState({editChanged:!0})},encrypt:function(t,s){return e.props.encrypt(t,s)},decrypt:function(t,s){return e.props.decrypt(t,s)}}),Object(H.jsxs)("div",{className:this.props.classes.sampleUrl,children:[T.a.t("Local URL"),": ",Object(H.jsxs)("a",{href:"http://".concat(this.props.native.bind,":").concat(this.props.native.port,"/").concat(t.name,"?key=").concat(this.props.native.key),target:"_blank",rel:"noopener noreferrer",children:["URL: http://",this.props.native.bind,":",this.props.native.port,"/",t.name,"?key=",this.props.native.key]})]}),Object(H.jsxs)("div",{className:this.props.classes.sampleUrl,children:[T.a.t("Web URL"),": ",Object(H.jsxs)("a",{href:"http://".concat(this.state.webInstanceHost,"/").concat(this.props.adapterName,".").concat(this.props.instance,"/").concat(t.name),target:"_blank",rel:"noopener noreferrer",children:["URL: http://",this.state.webInstanceHost,"/",this.props.adapterName,".",this.props.instance,"/",t.name]})]})]}),Object(H.jsxs)("div",{className:this.props.classes.divTestCam,children:[Object(H.jsx)(Z.a,{disabled:this.state.requesting||!this.state.instanceAlive,variant:"contained",color:"primary",size:"small",className:this.props.classes.buttonTest,onClick:function(){return e.onTest()},startIcon:Object(H.jsx)(ce.a,{}),children:T.a.t("Test")}),this.state.testImg?Object(H.jsx)("img",{alt:"test",className:this.props.classes.imgTest,src:this.state.testImg}):null]})]}),Object(H.jsxs)(_.a,{children:[Object(H.jsx)(Z.a,{disabled:!this.state.editChanged,onClick:function(){var t=JSON.parse(JSON.stringify(e.props.native.cameras));if(e.editedSettings){var s=t[e.state.editCam];t[e.state.editCam]=JSON.parse(e.editedSettings),he.forEach((function(a){return t[e.state.editCam][a]=s[a]})),e.props.onChange("cameras",t,(function(){return e.setState({editCam:!1,editChanged:!1})}))}else e.setState({editCam:!1,editChanged:!1})},color:"primary",children:T.a.t("Apply")}),Object(H.jsx)(Z.a,{onClick:function(){return e.setState({editCam:!1,editChanged:!1})},children:T.a.t("Cancel")})]})]})}return null}},{key:"renderCameraButtons",value:function(e,t){var s=this;return[Object(H.jsx)(V.a,{size:"small",className:this.props.classes.lineEdit,onClick:function(){s.editedSettingsOld=JSON.parse(JSON.stringify(s.props.native.cameras[t])),he.forEach((function(e){console.log("delete "+e),delete s.editedSettingsOld[e]})),s.editedSettingsOld=JSON.stringify(s.editedSettingsOld),s.setState({editCam:t})},children:Object(H.jsx)(ee.a,{className:this.props.classes.buttonIcon})},"edit"),t?Object(H.jsx)(V.a,{size:"small",className:this.props.classes.lineUp,onClick:function(){var e=JSON.parse(JSON.stringify(s.props.native.cameras)),a=e[t];e.splice(t,1),e.splice(t-1,0,a),s.props.onChange("cameras",e)},children:Object(H.jsx)(ne.a,{className:this.props.classes.buttonIcon})},"up"):Object(H.jsx)("div",{className:this.props.classes.lineNoButtonUp,children:"\xa0"},"upEmpty"),t!==this.props.native.cameras.length-1?Object(H.jsx)(V.a,{size:"small",className:this.props.classes.lineDown,onClick:function(){var e=JSON.parse(JSON.stringify(s.props.native.cameras)),a=e[t];e.splice(t,1),e.splice(t+1,0,a),s.props.onChange("cameras",e)},children:Object(H.jsx)(re.a,{className:this.props.classes.buttonIcon})},"down"):Object(H.jsx)("div",{className:this.props.classes.lineNoButtonDown,children:"\xa0"},"downEmpty"),Object(H.jsx)(V.a,{size:"small",className:this.props.classes.lineDelete,onClick:function(){var e=JSON.parse(JSON.stringify(s.props.native.cameras));e.splice(t,1),s.props.onChange("cameras",e)},children:Object(H.jsx)(X.a,{className:this.props.classes.buttonIcon})},"delete")]}},{key:"renderCamera",value:function(e,t){var s=this,a=this.props.native.cameras.find((function(s,a){return s.name===e.name&&a!==t}));this.props.native.cameras.forEach((function(e,t){e.id||(e.id=Date.now()+t)}));var n=e.url||"";if(n){var i=n.match(/^https?:\/\/([^@]+)@/);i&&i[1]&&(n=n.replace(i[1]+"@",""))}return Object(H.jsxs)("div",{className:this.props.classes.lineDiv,children:[Object(H.jsx)("div",{className:this.props.classes.lineText,children:Object(H.jsx)(w.a,{className:this.props.classes.name,label:T.a.t("Name"),error:a,value:e.name,helperText:a?T.a.t("Duplicate name"):"",onChange:function(e){var a=JSON.parse(JSON.stringify(s.props.native.cameras));a[t].name=e.target.value.replace(/[^-_\da-zA-Z]/g,"_"),s.props.onChange("cameras",a)}})}),Object(H.jsx)("div",{className:this.props.classes.lineDesc,children:Object(H.jsx)(w.a,{className:this.props.classes.desc,label:T.a.t("Description"),value:e.desc,onChange:function(e){var a=JSON.parse(JSON.stringify(s.props.native.cameras));a[t].desc=e.target.value,s.props.onChange("cameras",a)}})}),Object(H.jsx)("div",{className:this.props.classes.lineType,children:Object(H.jsxs)(J.a,{className:this.props.classes.type,children:[Object(H.jsx)(z.a,{children:T.a.t("Type")}),Object(H.jsx)(L.a,{value:e.type,onChange:function(e){var a=JSON.parse(JSON.stringify(s.props.native.cameras));a[t].type=e.target.value,s.props.onChange("cameras",a)},children:Object.keys(de).map((function(e){return Object(H.jsx)(U.a,{value:e,children:de[e].name||e},e)}))})]})}),this.renderCameraButtons(e,t),n?Object(H.jsx)("div",{className:this.props.classes.lineUrl,children:n}):null]},"cam"+e.id)}},{key:"render",value:function(){var e=this;return Object(H.jsxs)("div",{className:this.props.classes.tab,children:[Object(H.jsx)(V.a,{size:"small",onClick:function(){for(var t=JSON.parse(JSON.stringify(e.props.native.cameras)),s=1;t.find((function(e){return e.name==="cam"+s}));)s++;t.push({name:"cam"+s,type:"url",id:Date.now()}),e.props.onChange("cameras",t)},children:Object(H.jsx)(se.a,{})}),this.props.native.cameras?this.props.native.cameras.map((function(t,s){return e.renderCamera(t,s)})):null,this.renderConfigDialog(),this.renderMessage()]})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return t.instanceAlive!==e.instanceAlive?{instanceAlive:e.instanceAlive}:null}}]),s}(a.Component),fe=Object(g.a)((function(e){return{tab:{width:"100%",height:"100%"},lineDiv:{width:"100%",paddingBottom:5,borderBottom:"1px dashed gray"},lineText:{display:"inline-block",width:200},lineDesc:{display:"inline-block",width:"calc(100% - 600px)"},lineType:{display:"inline-block",width:200},lineEdit:{display:"inline-block",marginLeft:10,marginTop:10},lineUp:{display:"inline-block",marginLeft:10,marginTop:10},lineDown:{display:"inline-block",marginLeft:10,marginTop:10},lineDelete:{display:"inline-block",marginLeft:10,marginTop:10},lineUrl:{marginLeft:200,opacity:.5,fontSize:"small",fontStyle:"italic"},type:{width:"100%"},name:{width:"calc(100% - 10px)"},desc:{width:"calc(100% - 10px)"},lineNoButtonUp:{display:"inline-block",width:40,marginLeft:10},lineNoButtonDown:{display:"inline-block",width:40,marginLeft:10},divConfig:{verticalAlign:"top",width:"calc(100% - 300px)",display:"inline-block"},divTestCam:{width:300,display:"inline-block",verticalAlign:"top"},buttonIcon:{marginTop:6},buttonTest:{marginBottom:e.spacing(1)},imgTest:{width:"100%",height:"auto"},sampleUrl:{display:"block",marginTop:e.spacing(1)}}}))(me),ve=function(e){Object(v.a)(a,e);var t=Object(b.a)(a);function a(e){var n;Object(d.a)(this,a);var i={encryptedFields:["password"],adapterName:"cameras",doNotLoadAllObjects:!0};return i.translations={en:s(215),de:s(216),ru:s(217),pt:s(218),nl:s(219),fr:s(220),it:s(221),es:s(222),pl:s(223),"zh-cn":s(224)},(n=t.call(this,e,i)).onAliveChanged=function(e,t){e&&n.state.alive!==(!!t&&t.val)&&n.setState({alive:!!t&&t.val})},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){Object(m.a)(Object(f.a)(a.prototype),"componentDidMount",this).call(this),this.socket.unsubscribeState(this.instanceId+".alive",this.onAliveChanged)}},{key:"componentWillUnmount",value:function(){this.socket.unsubscribeState(this.instanceId+".alive",this.onAliveChanged),Object(m.a)(Object(f.a)(a.prototype),"componentWillUnmount",this).call(this)}},{key:"onConnectionReady",value:function(){var e=this;this.socket.getState(this.instanceId+".alive").then((function(t){e.state.alive!==(!!t&&t.val)&&e.setState({alive:!!t&&t.val}),e.state.native.key||setTimeout((function(){return e.updateNativeValue("key",(Math.round(1e11*Math.random())/1e5).toFixed(6))}))}))}},{key:"getSelectedTab",value:function(){var e=this.state.selectedTab;return e&&"options"!==e?"cameras"===e?1:void 0:0}},{key:"render",value:function(){var e=this;return this.state.loaded?Object(H.jsxs)("div",{className:"App",style:{background:"dark"===this.state.themeType?"black":"white"},children:[Object(H.jsx)(j.a,{position:"static",children:Object(H.jsxs)(O.a,{value:this.getSelectedTab(),onChange:function(t,s){return e.selectTab(t.target.parentNode.dataset.name,s)},children:[Object(H.jsx)(S.a,{selected:"options"===this.state.selectedTab,label:T.a.t("Options"),"data-name":"options"}),Object(H.jsx)(S.a,{selected:"cameras"===this.state.selectedTab,label:T.a.t("Cameras"),"data-name":"cameras"})]})}),Object(H.jsxs)("div",{className:this.isIFrame?this.props.classes.tabContentIFrame:this.props.classes.tabContent,children:[("options"===this.state.selectedTab||!this.state.selectedTab)&&Object(H.jsx)(F,{common:this.common,socket:this.socket,native:this.state.native,encrypt:function(t,s){return s(e.encrypt(t))},decrypt:function(t,s){return s(e.decrypt(t))},onError:function(t){return e.setState({errorText:t})},onLoad:function(t){return e.onLoadConfig(t)},instance:this.instance,theme:this.state.theme,getIpAddresses:function(){return e.socket.getIpAddresses(e.common.host)},getExtendableInstances:function(){return e.getExtendableInstances()},onConfigError:function(t){return e.setConfigurationError(t)},adapterName:this.adapterName,onChange:function(t,s,a){return e.updateNativeValue(t,s,a)}},"options"),"cameras"===this.state.selectedTab&&Object(H.jsx)(fe,{theme:this.state.theme,socket:this.socket,adapterName:this.adapterName,instance:this.instance,encrypt:function(t,s){return s(e.encrypt(t))},decrypt:function(t,s){return s(e.decrypt(t))},instanceAlive:this.state.alive,native:this.state.native,onChange:function(t,s,a){return e.updateNativeValue(t,s,a)}},"cameras")]}),this.renderError(),this.renderSaveCloseButtons()]}):Object(H.jsx)(N.a,{theme:this.state.themeType})}}]),a}(C.a),be=Object(g.a)((function(e){return{root:{},tabContent:{padding:10,height:"calc(100% - 64px - 48px - 20px)",overflow:"auto"},tabContentIFrame:{padding:10,height:"calc(100% - 64px - 48px - 20px - 38px)",overflow:"auto"}}}))(ve);window.adapterName="cameras",console.log("iobroker."+window.adapterName+"@"+r.a);var ge=u.a.getThemeName();!function e(){return i.a.render(Object(H.jsx)(o.a,{theme:l()(ge),children:Object(H.jsx)(be,{onThemeChange:function(t){ge=t,e()}})}),document.getElementById("root"))}(),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[226,1,2]]]);
//# sourceMappingURL=main.74715f3f.chunk.js.map