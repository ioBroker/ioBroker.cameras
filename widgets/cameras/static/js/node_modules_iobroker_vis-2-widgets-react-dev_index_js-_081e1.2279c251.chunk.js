"use strict";(self.webpackChunkiobroker_vis_2_widgets_camera=self.webpackChunkiobroker_vis_2_widgets_camera||[]).push([["node_modules_iobroker_vis-2-widgets-react-dev_index_js-_081e0","node_modules_iobroker_vis-2-widgets-react-dev_index_js-_081e1"],{8835:(t,e,i)=>{i.r(e),i.d(e,{VisRxWidget:()=>l});var n=i(8437),s=i.n(n),o=i(7085),a=i(5636),r=function(t,e,i,n){return new(i||(i=Promise))((function(s,o){function a(t){try{d(n.next(t))}catch(e){o(e)}}function r(t){try{d(n.throw(t))}catch(e){o(e)}}function d(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(a,r)}d((n=n.apply(t,e||[])).next())}))};const d=["background-color","border","background","background-image","background-position","background-repeat","background-size","background-clip","background-origin","color","box-sizing","border-width","border-style","border-color","border-radius","box-shadow","text-align","text-shadow","font-family","font-size","font-weight","line-height","font-style","font-variant","letter-spacing","word-spacing"];class c extends n.Component{constructor(t){super(t),this.refService=s().createRef(),this.getIdSubscribeState=(t,e)=>r(this,void 0,void 0,(function*(){const i=yield this.props.context.socket.getState(t);this.props.context.socket.subscribeState(t,(()=>e(t,i)))})),this.onStateChanged=this.onStateChanged.bind(this);const e=this.props.context.views[this.props.view].widgets[this.props.id];this.state={values:{},data:JSON.parse(JSON.stringify(e.data||{})),style:JSON.parse(JSON.stringify(e.style||{})),rxData:JSON.parse(JSON.stringify(e.data||{})),rxStyle:JSON.parse(JSON.stringify(e.style||{}))},this.linkContext={IDs:[],bindings:{},visibility:{},lastChanges:{},signals:{},widgetAttrInfo:{}}}getWidgetInfo(){throw new Error("not implemented")}static getI18nPrefix(){return""}static getText(t){return t?"object"===typeof t?t[a.I18n.getLanguage()]||t.en:t:""}static t(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return a.I18n.t("".concat(this.getI18nPrefix()).concat(t),...i)}static getLanguage(){return a.I18n.getLanguage()}renderWidgetBody(t){return null}onStateUpdated(t,e){}formatValue(t,e){var i;return"number"===typeof t&&(t=0===e?Math.round(t):Math.round(100*t)/100,(null===(i=this.props.context.systemConfig)||void 0===i?void 0:i.common)&&this.props.context.systemConfig.common.isFloatComma&&(t=t.toString().replace(".",","))),void 0===t||null===t?"":t.toString()}wrapContent(t,e,i,n,a,r){var c,l;const g=(null===r||void 0===r?void 0:r.Card)||o.Card,h=(null===r||void 0===r?void 0:r.CardContent)||o.CardContent,u=Object.assign({width:"calc(100% - 8px)",height:"calc(100% - 8px)",margin:4},null===(l=null===(c=this.props.customSettings)||void 0===c?void 0:c.viewStyle)||void 0===l?void 0:l.visCard);Object.keys(this.state.rxStyle).forEach((t=>{const e=this.state.rxStyle[t];null!==e&&void 0!==e&&d.includes(t)&&(t=t.replace(/(-\w)/g,(t=>t[1].toUpperCase())),u[t]=e)})),this.wrappedContent=!0;const v=this.state.rxData.widgetTitle;return s().createElement(g,{className:"vis_rx_widget_card",style:u,onClick:a},s().createElement(h,{className:"vis_rx_widget_card_content",style:Object.assign({display:"flex",flexDirection:"column",alignItems:"center",height:"calc(100% - 32px)",paddingBottom:16,position:"relative"},i)},v?s().createElement("div",{className:"vis_rx_widget_card_name",style:{display:"flex",justifyContent:"space-between",width:"100%",alignItems:"center"}},s().createElement("div",{className:"vis_rx_widget_card_name_div",style:Object.assign({fontSize:24,paddingTop:0,paddingBottom:4},n)},v),e||null):e||null,t))}onStateChanged(t,e){if(!e)return;const i=JSON.parse(JSON.stringify(this.state.values));void 0!==e.val&&(i["".concat(t,".val")]=e.val),void 0!==e.ts&&(i["".concat(t,".ts")]=e.ts),void 0!==e.from&&(i["".concat(t,".from")]=e.from),void 0!==e.lc&&(i["".concat(t,".lc")]=e.lc),void 0!==e.ts&&(i["".concat(t,".ts")]=e.ts),this.onStateUpdated(t,e),this.setState({values:i})}componentDidMount(){return r(this,void 0,void 0,(function*(){var t,e;null===(e=null===(t=this.getWidgetInfo())||void 0===t?void 0:t.visAttrs)||void 0===e||e.forEach((t=>{var e;return null===(e=null===t||void 0===t?void 0:t.fields)||void 0===e?void 0:e.forEach((t=>{"id"===(null===t||void 0===t?void 0:t.type)&&Object.keys(this.state.data).forEach((e=>{if(e.match(new RegExp("^".concat(t.name,"[0-9]*$")))){const t=this.state.data[e];this.linkContext.IDs.includes(t)||this.linkContext.IDs.push(t)}}))}))}));for(let i=0;i<this.linkContext.IDs.length;i++)yield this.getIdSubscribeState(this.linkContext.IDs[i],this.onStateChanged)}))}componentWillUnmount(){this.linkContext.IDs.forEach((t=>this.props.context.socket.unsubscribeState(t,this.onStateChanged)))}getWidgetView(t,e){return s().createElement("div",{style:{width:"100%",height:"100%"}},"DEMO VIEW")}getWidgetInWidget(t,e,i){return null}render(){var t,e;return s().createElement("div",{ref:this.refService,style:{width:null===(t=this.state.style)||void 0===t?void 0:t.width,height:null===(e=this.state.style)||void 0===e?void 0:e.height}},this.renderWidgetBody({className:"",overlayClassNames:[],style:{},id:"defaultID",refService:this.refService,widget:{tpl:"tplDemo",data:{},style:{},widgetSet:"demoSet"}}))}}c.POSSIBLE_MUI_STYLES=d;const l=c}}]);
//# sourceMappingURL=node_modules_iobroker_vis-2-widgets-react-dev_index_js-_081e1.2279c251.chunk.js.map